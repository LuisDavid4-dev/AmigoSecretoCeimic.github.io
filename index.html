<!DOCTYPE html>
<html lang="es">
<head>
    <link rel="stylesheet" href="estilos.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intercambio NavideÃ±o 2025</title>
</head>
<body>
    <div class="snowflakes" aria-hidden="true"></div>
    <div id="christmas-loader">
        <img src="Bienvenida.webp" alt="Feliz Navidad"> 
    </div>

    <div id="user-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <div class="modal-header">
                </div>
            <div class="modal-body">
                </div>
        </div>
    </div>
 
    <header class="navidad-header">
        <div class="header-content-wrapper"> <div class="header-line">
                <span class="arbol-decor arbol-izq">ğŸ„</span> 
                <h1>Intercambio NavideÃ±o 2025</h1>
                <span class="arbol-decor arbol-der">ğŸ„</span> 
            </div>
            
            <div class="header-line">
                <span class="estrella estrella-izq">âœ¨</span>
                <h2 class="titulo-rojo-navidad">Â¡Feliz Navidad!</h2>
                <span class="estrella estrella-der">âœ¨</span>
            </div>
            
            </div>
    </header>

    <div id="search-container">
        <input type="text" id="user-search-input" placeholder="Buscar amigo secreto...">
        <button id="clear-search-btn" style="display: none;">&times;</button>
    </div>
    
    <div class="product-grid">
    </div>

    <script>
Â  Â  Â  Â  // --- 1. FUNCIONES DE UTILERÃA (DEFINIDAS PRIMERO) ---

Â  Â  Â  Â  function adjustSnowflakeHeight() {
Â  Â  Â  Â  Â  Â  const snowflakes = document.querySelector('.snowflakes');
Â  Â  Â  Â  Â  Â  const totalContentHeight = document.body.scrollHeight;
Â  Â  Â  Â  Â  Â  const minHeight = window.innerHeight;
Â  Â  Â  Â  Â  Â  const requiredHeight = Math.max(totalContentHeight, minHeight);
Â  Â  Â  Â  Â  Â  snowflakes.style.height = `${requiredHeight}px`;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  function createSnowflake() {
Â  Â  Â  Â  Â  Â  const snowflake = document.createElement('div');
Â  Â  Â  Â  Â  Â  snowflake.className = 'snowflake';
Â  Â  Â  Â  Â  Â  snowflake.innerHTML = 'â€¢'; 
Â  Â  Â  Â  Â  Â  const startX = Math.random() * 100;
Â  Â  Â  Â  Â  Â  snowflake.style.left = `${startX}vw`;
Â  Â  Â  Â  Â  Â  const size = Math.random() * 0.5 + 0.8; 
Â  Â  Â  Â  Â  Â  snowflake.style.fontSize = `${size}em`;
Â  Â  Â  Â  Â  Â  const duration = Math.random() * 10 + 10; 
Â  Â  Â  Â  Â  Â  snowflake.style.animationDuration = `${duration}s`;
Â  Â  Â  Â  Â  Â  const delay = Math.random() * 10;
Â  Â  Â  Â  Â  Â  snowflake.style.animationDelay = `${delay}s`;
Â  Â  Â  Â  Â  Â  return snowflake;
Â  Â  Â  Â  }

Â  Â  Â  Â  function initSnowfall() {
Â  Â  Â  Â  Â  Â  const snowfallContainer = document.querySelector('.snowflakes');
Â  Â  Â  Â  Â  Â  const numberOfSnowflakes = 50; 
Â  Â  Â  Â  Â  Â  for (let i = 0; i < numberOfSnowflakes; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  snowfallContainer.appendChild(createSnowflake());
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- 2. CÃ“DIGO DEL MODAL (Mantenido y Modificado para PestaÃ±as) ---

Â  Â  Â  Â  const modal = document.getElementById('user-modal');
Â  Â  Â  Â  const closeBtn = document.querySelector('.close-btn');

Â  Â  Â  Â  // FunciÃ³n para manejar el cambio de pestaÃ±as
Â  Â  Â  Â  function switchModalTab(tabId) {
Â  Â  Â  Â  Â  Â  // 1. Desactivar todas las pestaÃ±as y ocultar todos los contenidos
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.modal-tab').forEach(tab => {
Â  Â  Â  Â  Â  Â  Â  Â  tab.classList.remove('active-tab');
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.tab-content').forEach(content => {
Â  Â  Â  Â  Â  Â  Â  Â  content.style.display = 'none';
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  // 2. Activar la pestaÃ±a y mostrar el contenido seleccionado
Â  Â  Â  Â  Â  Â  const selectedTab = document.querySelector(`.modal-tab[data-tab="${tabId}"]`);
Â  Â  Â  Â  Â  Â  const selectedContent = document.getElementById(tabId);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (selectedTab && selectedContent) {
Â  Â  Â  Â  Â  Â  Â  Â  selectedTab.classList.add('active-tab');
Â  Â  Â  Â  Â  Â  Â  Â  selectedContent.style.display = 'block';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }


Â  Â  Â  Â  function openModal(id, name, imgSrc, basicInfo, descripcion, obsequios) {
Â  Â  Â  Â  Â  Â  const modalHeader = document.querySelector('.modal-header');
Â  Â  Â  Â  Â  Â  const modalBody = document.querySelector('.modal-body');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  document.body.classList.add('modal-open');

Â  Â  Â  Â  Â  Â  const formattedBasicInfo = basicInfo
Â  Â  Â  Â  Â  Â  Â  Â  .split(', ') 
Â  Â  Â  Â  Â  Â  Â  Â  .map(item => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const parts = item.split(': '); 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (parts.length === 2) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return `<strong>${parts[0]}:</strong><br> ${parts[1]}`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return item; 
Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  Â  Â  .join('<br>'); 

Â  Â  Â  Â  Â  Â modalHeader.innerHTML =
Â  Â  Â  Â  Â  Â  Â  Â  '<div class="modal-title">'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '<h3 class="modal-title-h3">'+name+'</h3>'+
Â  Â  Â  Â  Â  Â  Â  Â  '</div>'+
Â  Â  Â  Â  Â  Â  Â  Â  '<div class="modal-header-content-wrapper">'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '<div class="modal-visual-info">'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '<img src="fotos/'+imgSrc+'" alt="Foto de '+name+'" class="modal-img">'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '<div class="modal-info-top">'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '<p>'+formattedBasicInfo+'</p>'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '</div>'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '</div>'+
Â  Â  Â  Â  Â  Â  Â  Â  '</div>';

Â  Â  Â  Â  Â  Â  const titleElement = modalHeader.querySelector('.modal-title-h3');

Â  Â  Â  Â  Â  Â  // Comprobamos la condiciÃ³n: Si el ID es igual a 6 o 8
Â  Â  Â  Â  Â  Â  if (id === 6 || id === 8) {
Â  Â  Â  Â  Â  Â  Â  Â  titleElement.style.fontSize = '1.4em'; 
Â  Â  Â  Â  Â  Â  Â  Â  titleElement.style.color = 'var(--azul-profundo)'; 
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const formattedObsequios = obsequios
            .split('|') // Primero separa por |
            .map(item => {
                // Luego separa por coma dentro de cada item
                const subitems = item.split(',').map(sub => sub.trim()).filter(Boolean);

                return subitems.map(sub => {
                    const match = sub.match(/(.+)\((https?:\/\/.+)\)/);
                    if (match) {
                        const nombre = match[1].trim();
                        const url = match[2].trim();
                        return `<a href="${url}" target="_blank">${nombre}</a><br>`; // salto de lÃ­nea sin punto
                    }
                    return `<span>${sub}</span><br>`; // salto de lÃ­nea sin punto
                }).join('');
            })
            .map(block => `<li>${block}</li>`) // cada bloque separado por | se convierte en <li>
            .join('');




Â  Â  Â  Â  Â  Â  // ğŸ”‘ MODIFICACIÃ“N CLAVE: Se aÃ±aden las pestaÃ±as
Â  Â  Â  Â  Â  Â  modalBody.innerHTML =
Â  Â  Â  Â  Â  Â  Â  Â  '<div class="tab-container">'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '<div class="modal-tab-header">'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '<div class="modal-tab active-tab" data-tab="tab-descripcion">DESCRIPCIÃ“N</div>'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '<div class="modal-tab" data-tab="tab-regalos">LISTA DE REGALOS</div>'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '</div>'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '<div class="modal-tab-content-wrapper">'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Contenido de la DescripciÃ³n (inicialmente visible)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '<div id="tab-descripcion" class="tab-content" style="display: block;">'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '<p class="descripcion-class">'+descripcion+'</p>'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '</div>'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Contenido de la Lista de Regalos (inicialmente oculto)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '<div id="tab-regalos" class="tab-content" style="display: none;">'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '<ul>'+formattedObsequios+'</ul>'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '</div>'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '</div>'+
Â  Â  Â  Â  Â  Â  Â  Â  '</div>';


Â  Â  Â  Â  Â  Â  // LÃ³gica para el usuario ID=8
Â  Â  Â  Â  Â  Â  if (id === 8 || id === 1) {
Â  Â  Â  Â  Â  Â  Â  Â  const descripcionElement = modalBody.querySelector('.descripcion-class');
Â  Â  Â  Â  Â  Â  Â  Â  if (descripcionElement) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  descripcionElement.style.fontSize = '0.8em'; 
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // ğŸ”‘ AÃ‘ADIR LISTENERS DE PESTAÃ‘AS
Â  Â  Â  Â  Â  Â  modal.querySelectorAll('.modal-tab').forEach(tab => {
Â  Â  Â  Â  Â  Â  Â  Â  tab.onclick = function() {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  switchModalTab(this.getAttribute('data-tab'));
Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  modal.style.display = 'flex';
Â  Â  Â  Â  }

Â  Â  Â  Â  // Estas funciones se mantienen por compatibilidad, pero los listeners se redefinen en DOMContentLoaded
Â  Â  Â  Â  closeBtn.onclick = function () {
Â  Â  Â  Â  Â  Â  modal.style.display = 'none';
Â  Â  Â  Â  Â  Â  document.body.classList.remove('modal-open');
Â  Â  Â  Â  }

Â  Â  Â  Â  window.onclick = function (event) {
Â  Â  Â  Â  Â  Â  if (event.target === modal) {
Â  Â  Â  Â  Â  Â  Â  Â  modal.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  document.body.classList.remove('modal-open');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  let allUserData = []; 
Â  Â  Â  Â  let isChristmasDay = false;
Â  Â  Â  Â  // --- 3. BLOQUE PRINCIPAL DE CARGA (document.addEventListener('DOMContentLoaded')) ---

Â  Â  Â  Â  const searchInput = document.getElementById('user-search-input');
Â  Â  Â  Â  const clearButton = document.getElementById('clear-search-btn');
Â  Â  Â  Â  const grid = document.querySelector('.product-grid');

Â  Â  Â  Â  const FIXED_ICON_MAP = ["ğŸŒŸ", "ğŸ¦Œ", "ğŸ", "ğŸ””", "â„ï¸", "ğŸ§¤", "â›„", "â˜•", "ğŸ„", "ğŸ¬"];

Â  Â  Â  Â  function activateChristmasDayMode() {
Â  Â  Â  Â  Â  Â  const today = new Date();
Â  Â  Â  Â  Â  Â  // Diciembre es 11, dÃ­a 25.
Â  Â  Â  Â  Â  Â  const isChristmasDay = today.getMonth() === 11 && today.getDate() === 19;
Â  Â  Â  Â  Â  Â  // Para pruebas puedes cambiar a: const isChristmasDay = true; 

Â  Â  Â  Â  Â  Â  if (isChristmasDay) {
Â  Â  Â  Â  Â  Â  Â  Â  // 1. CAMBIAR EL TÃTULO
Â  Â  Â  Â  Â  Â  Â  Â  const mainTitle = document.querySelector('.titulo-rojo-navidad');
Â  Â  Â  Â  Â  Â  Â  Â  if (mainTitle) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  mainTitle.innerHTML = 'Â¡Es Hoy! ğŸ…ğŸ';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  mainTitle.style.fontSize = '5em'; 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  mainTitle.style.color = 'var(--verde-navidad)'; 
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  // 2. REEMPLAZAR DECORACIONES DEL HEADER
Â  Â  Â  Â  Â  Â  Â  Â  const arbolDecor = document.querySelectorAll('.arbol-decor');
Â  Â  Â  Â  Â  Â  Â  Â  arbolDecor.forEach(decor => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  decor.innerHTML = 'ğŸ¦Œ'; 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  decor.style.color = 'var(--rojo-navidad)'; 
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  const estrellaDecor = document.querySelectorAll('.estrella-decor');
Â  Â  Â  Â  Â  Â  Â  Â  estrellaDecor.forEach(decor => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  decor.innerHTML = 'ğŸ'; 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  decor.style.fontSize = '3em';
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  // 3. ACTIVAR EFECTO VISUAL
Â  Â  Â  Â  Â  Â  Â  Â  document.body.style.backgroundImage = 'radial-gradient(circle, rgba(255,255,255,0.3) 1px, transparent 1px)';
Â  Â  Â  Â  Â  Â  Â  Â  document.body.style.backgroundSize = '50px 50px';
Â  Â  Â  Â  Â  Â  Â  Â  document.body.style.animation = 'none'; 
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  // Opcional: Cambiar el color del borde de las tarjetas
Â  Â  Â  Â  Â  Â  Â  Â  document.documentElement.style.setProperty('--azul-hielo-vivo', 'var(--rojo-navidad)');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderCards(data) {
Â  Â  Â  Â  Â  Â  grid.innerHTML = ''; 

Â  Â  Â  Â  Â  Â  if (data.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  grid.innerHTML = '<p class="no-results-message">ğŸ¥º Â¡Oh no! No se encontraron usuarios que coincidan con la bÃºsqueda.</p>';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  data.forEach((amigo, index) => {
Â  Â  Â  Â  Â  Â  Â  Â  const card = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  card.className = 'product-card';
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  const fixedIconIndex = amigo.id % FIXED_ICON_MAP.length; 
Â  Â  Â  Â  Â  Â  Â  Â  const defaultCardIcon = FIXED_ICON_MAP[fixedIconIndex];
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  const cardIcon = isChristmasDay ? 'ğŸ…' : defaultCardIcon;
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  const formattedHobbies = amigo.hobbies
Â  Â  Â  Â  Â  Â  Â  Â  .split('|')
Â  Â  Â  Â  Â  Â  Â  Â  .map(hobby => hobby.trim())
Â  Â  Â  Â  Â  Â  Â  Â  .join('<br>');


Â  Â  Â  Â  Â  Â  Â  Â  card.onclick = () => openModal(
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  amigo.id,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  amigo.Nombre_ApellidoPaterno,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  amigo.Foto,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `Hobbies: ${formattedHobbies}, Ãrea: ${amigo.Area}`,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  amigo.descripcion,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  amigo.lista_Regalos
Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  card.innerHTML = 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '<span class="card-icon-emoji">'+cardIcon+'</span>'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '<br>'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '<div class="card-content">'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '<img src="fotos/'+amigo.Foto+'" alt="Foto de '+amigo.Nombre_ApellidoPaterno+'">'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '<h3>'+amigo.Nombre_ApellidoPaterno+'</h3>'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '</div>'+
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '<p>'+amigo.Area.split('.')[0]+'</p>';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  grid.appendChild(card);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  setTimeout(adjustSnowflakeHeight, 50);
Â  Â  Â  Â  }


Â  Â  Â  Â  // --- FUNCIÃ“N: FILTRA EL CONTENIDO ---
Â  Â  Â  Â  function filterCards() {
Â  Â  Â  Â  Â  Â  const query = searchInput.value.toLowerCase().trim();
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (query.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  clearButton.style.display = 'inline-block';
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  clearButton.style.display = 'none';
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (query === '') {
Â  Â  Â  Â  Â  Â  Â  Â  renderCards(allUserData);
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const filteredData = allUserData.filter(amigo => {
Â  Â  Â  Â  Â  Â  Â  Â  const fullName = `${amigo.Nombre_ApellidoPaterno || ''}`.toLowerCase();
Â  Â  Â  Â  Â  Â  Â  Â  return fullName.includes(query);
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  renderCards(filteredData);
Â  Â  Â  Â  }

Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', () => {
Â  Â  Â  Â  Â  Â  const iconList = ["ğŸ…", "ğŸ", "ğŸ””", "âœ¨", "â›„", "ğŸ¦Œ", "â˜•", "â„ï¸", "ğŸ§¤", "ğŸ„", "ğŸŒŸ", "ğŸ¬"];
Â  Â  Â  Â  Â  Â  const grid = document.querySelector('.product-grid');

Â  Â  Â  Â  Â  Â  initSnowfall();

Â  Â  Â  Â  Â  Â  activateChristmasDayMode();
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  window.addEventListener('resize', () => {
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(adjustSnowflakeHeight, 50);
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  searchInput.addEventListener('input', filterCards); 
Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  clearButton.addEventListener('click', () => { 
Â  Â  Â  Â  Â  Â  Â  Â  searchInput.value = '';
Â  Â  Â  Â  Â  Â  Â  Â  filterCards();
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  searchInput.addEventListener('focus', () => {
Â  Â  Â  Â  Â  Â  Â  Â  const searchContainer = document.getElementById('search-container');
Â  Â  Â  Â  Â  Â  Â  Â  searchContainer.scrollIntoView({ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  behavior: 'smooth', 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  block: 'start' Â  Â 
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  // 3. CARGAR DATOS (fetch)
Â  Â  Â  Â  Â  Â  fetch('datos.json')
Â  Â  Â  Â  Â  Â  Â  Â  .then(response => response.json())
Â  Â  Â  Â  Â  Â  Â  Â  .then(data => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data.sort((a, b) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return a.Area.localeCompare(b.Area);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  allUserData = data; 
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderCards(allUserData);
Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  Â  Â  .catch(error => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error('Error al cargar datos.json:', error);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  grid.innerHTML = '<p>No se pudieron cargar los datos del intercambio.</p>';
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  const loader = document.getElementById('christmas-loader');
Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  loader.style.opacity = '0';
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  loader.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  }, 500);
Â  Â  Â  Â  Â  Â  }, 1500);

Â  Â  Â  Â  Â  Â  // 5. LISTENERS DEL MODAL (Se redefinen para incluir la clase de remociÃ³n)
Â  Â  Â  Â  Â  Â  closeBtn.onclick = function () {
Â  Â  Â  Â  Â  Â  Â  Â  modal.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  document.body.classList.remove('modal-open');
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  window.onclick = function (event) {
Â  Â  Â  Â  Â  Â  Â  Â  if (event.target === modal) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  modal.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.body.classList.remove('modal-open');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  });
Â  Â  </script>
</body>
</html>